<div class="w-100 position-relative container-login">
  <div class="content w-100 h-100 p-3 position-relative bg-dark">
    <form class="position-relative bg-white py-5 px-3 shadow-sm rounded-3" [formGroup]="registerForm" (submit)="enviar()">
      <div class="row position-relative">
        <div class="col-6">
          <label for="name" class="form-label opacity-75">Nombre</label>
          <input id="name"
                 type="text"
                 class="form-control"
                 formControlName="name"
                 [ngClass]="{
                 'is-invalid': registerForm.get('name')?.touched && registerForm.get('name')?.invalid,
                 'is-valid': registerForm.get('name')?.touched && registerForm.get('name')?.valid
          }">
          <div class="invalid-feedback" *ngIf="registerForm.get('name')?.touched && registerForm.get('name')?.invalid">
            El nombre es obligatorio
          </div>
        </div>
        <div class="col-6">
          <label for="usuario" class="form-label opacity-75">Usuario</label>
          <input id="usuario"
                 type="text"
                 class="form-control"
                 formControlName="username"
                 [ngClass]="{
               'is-invalid': registerForm.get('username')?.touched && registerForm.get('username')?.invalid,
               'is-valid': registerForm.get('username')?.touched && registerForm.get('username')?.valid
        }">
          <div class="invalid-feedback" *ngIf="registerForm.get('username')?.touched && registerForm.get('username')?.invalid">
            El usuario es obligatorio
          </div>
      </div>
      <div class="mt-4">
        <div class="align-items-center justify-content-center text-center">
          <label for="age" class="form-label opacity-75">Edad (opcional)</label>
          <p class="display-5 fs-3">{{registerForm.get("age")?.value}}</p>
        </div>
        <input id="age" type="range" class="form-range" min="12" max="100" formControlName="age">
      </div>

      </div>
      <div class="mt-3">
        <label for="email" class="form-label opacity-75">Email</label>
        <input id="email"
               type="text"
               class="form-control"
               formControlName="email"
               placeholder="name@example.com"
               [ngClass]="{
               'is-invalid': registerForm.get('email')?.touched && registerForm.get('email')?.invalid,
               'is-valid': registerForm.get('email')?.touched && registerForm.get('email')?.valid
        }">
        <div class="invalid-feedback" *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.invalid">
          El email no es válido
        </div>
      </div>
      <div class="mt-4">
          <label for="contraseña" class="form-label opacity-75">Contraseña</label>
          <div class="row position-relative show-password">
            <input id="contraseña"
                   type="{{showPassword ? 'text':'password'}}"
                   class="passwordInput col-7 form-control"
                   formControlName="password"
                   [ngClass]="{
                 'is-invalid': registerForm.get('password')?.touched && registerForm.get('password')?.invalid,
                 'is-valid': registerForm.get('password')?.touched && registerForm.get('password')?.valid
                 }">
          <i class="col-1 bi {{showPassword ? 'bi-eye-fill': 'bi-eye-slash-fill'}} align-items-center justify-content-center p-2" (click)="showPasswordToggle()"></i>
          <p class="form-text opacity-75 mb-1">La contraseña debe tener entre 8 y 20 caracteres</p>
          <div class="invalid-feedback" *ngIf="registerForm.get('password')?.touched && registerForm.get('password')?.invalid">
            La contraseña es obligatoria
          </div>
        </div>
      </div>
      <div class="mt-4">
        <label for="confirmContraseña" class="form-label opacity-75">Confirmar contraseña</label>
        <div class="row position-relative show-password">
          <input id="confirmContraseña"
                 type="{{showPassword ? 'text':'password'}}"
                 class="col-7 form-control passwordInput"
                 formControlName="confirmPassword"
                 [ngClass]="{
                 'is-invalid': registerForm.get('confirmPassword')?.touched && registerForm.get('confirmPassword')?.invalid || !(registerForm.get('password')?.value == registerForm.get('confirmPassword')?.value),
                 'is-valid': registerForm.get('confirmPassword')?.touched && registerForm.get('confirmPassword')?.valid
                 }">
          <i class="col-1 bi {{showPassword ? 'bi-eye-fill': 'bi-eye-slash-fill'}} align-items-center justify-content-center p-2" (click)="showPasswordToggle()"></i>

          <div class="invalid-feedback" *ngIf="registerForm.get('confirmPassword')?.touched && registerForm.get('confirmPassword')?.invalid || !(registerForm.get('password')?.value == registerForm.get('confirmPassword')?.value)">
            Las contraseñas no coinciden
          </div>
        </div>
      </div>
      <div class="text-center align align-items-center justify-content-center mt-5">
        <button type="submit" class="btn btn-light bg-dark text-white rounded-5 py-3 px-4" [disabled]="registerForm.invalid">Registrarme</button>
      </div>
    </form>
  </div>
</div>
